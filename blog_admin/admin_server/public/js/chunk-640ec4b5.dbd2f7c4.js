(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-640ec4b5"],{"9bbe":function(e,t,n){},e0a8:function(e,t,n){"use strict";var i=n("9bbe"),s=n.n(i);s.a},f1a4:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"links-manage"},[n("h1",[e._v("友链管理")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加友链")]),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.linksList,stripe:""}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),n("el-table-column",{attrs:{label:"名称",width:"150",prop:"name"}}),n("el-table-column",{attrs:{label:"描述",prop:"desc"}}),n("el-table-column",{attrs:{label:"图标",width:"150"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("img",{attrs:{src:e.row.icon,alt:e.row.name,width:"50"}})]}}])}),n("el-table-column",{attrs:{label:"操作",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){return e.deleteLinks(t.row)}}},[e._v("删除")])]}}])})],1),n("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,15],"page-size":5,layout:"total, sizes, prev, pager, next",total:e.totalLinks},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),n("el-dialog",{attrs:{title:"添加友链",visible:e.dialogVisible,"show-close":!1,"close-on-click-modal":!1,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{ref:"linksForm",attrs:{model:e.linksForm,rules:e.linksRules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"图标地址",prop:"icon"}},[n("el-input",{attrs:{placeholder:"请输入友链图标"},model:{value:e.linksForm.icon,callback:function(t){e.$set(e.linksForm,"icon",t)},expression:"linksForm.icon"}})],1),n("el-form-item",{attrs:{label:"友链名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入友链名称"},model:{value:e.linksForm.name,callback:function(t){e.$set(e.linksForm,"name",t)},expression:"linksForm.name"}})],1),n("el-form-item",{attrs:{label:"友链描述",prop:"desc"}},[n("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入友链描述"},model:{value:e.linksForm.desc,callback:function(t){e.$set(e.linksForm,"desc",t)},expression:"linksForm.desc"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.cancelAddLinks}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.submitAddLinks}},[e._v("提 交")])],1)],1)],1)},s=[],a=n("365c"),l={addLinks:function(e){return a["a"].post("/links/addLinks",e)},getLinksListLazyed:function(e){return a["a"].get("/links/getLinksListLazyed",{params:e})},getTotalLinks:function(){return a["a"].get("/links/getTotalLinks")},deleteLinksById:function(e){return a["a"].delete("/links/deleteLinksById",{data:{_id:e}})}},o={name:"LinksManage",data:function(){return{linksList:[],totalLinks:0,currentPage:1,query:{skip:0,limit:5},dialogVisible:!1,linksForm:{icon:"",name:"",desc:""},linksRules:{icon:[{required:!0,message:"图标地址必须",trigger:"blur"}],name:[{required:!0,message:"友链名称必须",trigger:"blur"}],desc:[{required:!0,message:"友链描述必须",trigger:"blur"},{max:100,message:"友链描述不超过100字",trigger:"blur"}]}}},mounted:function(){this.getLinksListLazyed(),this.getTotalLinks()},methods:{cancelAddLinks:function(){var e=this;this.$confirm("此操作将不会保存所输入内容, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.dialogVisible=!1,e.$refs.linksForm.resetFields()})).catch((function(){e.$message({type:"info",message:"已取消关闭"})}))},submitAddLinks:function(){var e=this;this.$refs.linksForm.validate((function(t){t&&l.addLinks(e.linksForm).then((function(t){0===t.code?(e.$message({type:"success",message:t.msg}),e.dialogVisible=!1,e.$refs.linksForm.resetFields()):e.$message({type:"error",message:t.msg})}))}))},deleteLinks:function(e){var t=this;this.$confirm("确定删除该条友链?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){l.deleteLinksById(e._id).then((function(e){0===e.code?(t.$message({type:"success",message:e.msg}),t.getTotalLinks(),t.getLinksListLazyed()):t.$message({type:"error",message:e.msg})}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},getTotalLinks:function(){var e=this;l.getTotalLinks().then((function(t){0===t.code&&(e.totalLinks=t.total)}))},getLinksListLazyed:function(){var e=this;l.getLinksListLazyed(this.query).then((function(t){0===t.code&&(e.linksList=t.data)}))},handleSizeChange:function(e){this.query.limit=e,this.getLinksListLazyed()},handleCurrentChange:function(e){this.query.skip=(e-1)*this.query.limit,this.getLinksListLazyed()}}},r=o,c=(n("e0a8"),n("2877")),u=Object(c["a"])(r,i,s,!1,null,"b568ce48",null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-640ec4b5.dbd2f7c4.js.map